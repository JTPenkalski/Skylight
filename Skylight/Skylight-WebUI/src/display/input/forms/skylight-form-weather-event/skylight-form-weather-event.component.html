<h1>New Weather Event</h1>

<form id="form-weather-event" class="flex-column" [formGroup]="form" (ngSubmit)="submit()">
  <skylight-form-field-set id="section-general" label="General Information">
    <skylight-form-question-input label="Name" [instance]="getControlInstance('name')"></skylight-form-question-input>

    <skylight-form-question-textarea label="Description" [instance]="getControlInstance('description')"></skylight-form-question-textarea>

    <skylight-form-question-select label="Weather" optionsEndpoint="Weather" [instance]="getControlInstance('weather')"></skylight-form-question-select>
    
    <div class="flex-row">
      <skylight-form-question-date label="Start Date" [instance]="getControlInstance('startDate')"></skylight-form-question-date>

      <skylight-form-question-date label="End Date" [instance]="getControlInstance('endDate')"></skylight-form-question-date>
    </div>
  </skylight-form-field-set>

  <skylight-form-field-set id="section-alerts" label="Alerts">
    <skylight-reorderable-list
      [instance]="getControlInstance('alerts')"
      (itemAdded)="addWeatherEventAlert()"
      (itemRemoved)="removeWeatherEventAlert($event)">
      <ng-template reorderableListItem let-item="item" let-index="index">
        <skylight-form-question-weather-event-alert
          label="Alert {{index}}"
          [instance]="getControlInstance(index, form.controls.alerts)">
        </skylight-form-question-weather-event-alert>
      </ng-template>
    </skylight-reorderable-list>
  </skylight-form-field-set>

  <skylight-form-field-set id="section-locations" label="Locations">
    <skylight-reorderable-list
      [instance]="getControlInstance('locations')"
      (itemAdded)="addLocation()"
      (itemRemoved)="removeLocation($event)">
      <ng-template reorderableListItem let-item="item" let-index="index">
        <skylight-form-question-location
          label="Location {{index}}"
          [instance]="getControlInstance(index, form.controls.locations)">
        </skylight-form-question-location>
      </ng-template>
    </skylight-reorderable-list>
  </skylight-form-field-set>

  <skylight-form-field-set id="section-statistics" label="Statistics">
    <skylight-form-question-weather-event-statistics
      label="Weather Event Statistics"
      [instance]="getControlInstance('statistics')">
    </skylight-form-question-weather-event-statistics>
  </skylight-form-field-set>

  <div>
    <button mat-raised-button color="accent" type="submit" [disabled]="false">Submit</button>
  </div>
</form>
